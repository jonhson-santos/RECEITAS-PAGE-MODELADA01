<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Farmácia Natural em Casa | Remédios Naturais Para Toda Família</title>
    <meta name="description" content="Descubra como tratar naturalmente diabetes, insônia, ansiedade e mais com ingredientes da sua cozinha. Guia completo de receitas naturais." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <script>
      // ALTERE O LINK PARA A PÁGINA QUE QUISER MOSTRAR QUANDO O USUÁRIO TENTAR SAIR
      const link = 'https://remarketing-orcin.vercel.app/';

      function setBackRedirect(url) {
        let urlBackRedirect = url;
        urlBackRedirect = urlBackRedirect =
          urlBackRedirect.trim() +
          (urlBackRedirect.indexOf('?') > 0 ? '&' : '?') +
          document.location.search.replace('?', '').toString();

        history.pushState({}, '', location.href);
        history.pushState({}, '', location.href);
        history.pushState({}, '', location.href);

        window.addEventListener('popstate', () => {
          console.log('onpopstate', urlBackRedirect);
        });
      }

      setBackRedirect(link);
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Facebook Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      
      // Configuração do pixel com parâmetros máximos
      fbq('init', 'YOUR_PIXEL_ID'); // Substitua pelo seu Pixel ID
      
      // PageView com parâmetros customizados
      fbq('track', 'PageView', {
        content_name: 'Farmácia Natural em Casa',
        content_category: 'Saúde Natural',
        content_type: 'product',
        value: 27.00,
        currency: 'BRL',
        predicted_ltv: 100.00,
        num_items: 1,
        status: 'active',
        search_string: window.location.search,
        page_title: document.title,
        referrer: document.referrer,
        user_agent: navigator.userAgent,
        language: navigator.language,
        screen_resolution: screen.width + 'x' + screen.height,
        viewport_size: window.innerWidth + 'x' + window.innerHeight,
        connection_type: navigator.connection ? navigator.connection.effectiveType : 'unknown',
        device_type: /Mobile|Android|iPhone|iPad/.test(navigator.userAgent) ? 'mobile' : 'desktop',
        timestamp: new Date().toISOString(),
        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
        url_path: window.location.pathname,
        url_params: window.location.search,
        utm_source: new URLSearchParams(window.location.search).get('utm_source') || 'direct',
        utm_medium: new URLSearchParams(window.location.search).get('utm_medium') || 'none',
        utm_campaign: new URLSearchParams(window.location.search).get('utm_campaign') || 'none',
        utm_term: new URLSearchParams(window.location.search).get('utm_term') || 'none',
        utm_content: new URLSearchParams(window.location.search).get('utm_content') || 'none',
        fbclid: new URLSearchParams(window.location.search).get('fbclid') || 'none',
        gclid: new URLSearchParams(window.location.search).get('gclid') || 'none'
      });
      
      // Rastreamento de scroll
      let scrollTracked = false;
      window.addEventListener('scroll', function() {
        if (!scrollTracked && window.scrollY > 100) {
          fbq('trackCustom', 'ScrollDepth', {
            scroll_depth: '100px',
            page_url: window.location.href,
            timestamp: new Date().toISOString()
          });
          scrollTracked = true;
        }
      });
      
      // Rastreamento de tempo na página
      setTimeout(function() {
        fbq('trackCustom', 'TimeOnPage', {
          time_spent: '30_seconds',
          page_url: window.location.href,
          timestamp: new Date().toISOString()
        });
      }, 30000);
      
      // Rastreamento de cliques em links externos
      document.addEventListener('click', function(e) {
        if (e.target.tagName === 'A' && e.target.href) {
          const isExternal = !e.target.href.includes(window.location.hostname);
          if (isExternal) {
            fbq('trackCustom', 'ExternalLinkClick', {
              link_url: e.target.href,
              link_text: e.target.textContent,
              page_url: window.location.href,
              timestamp: new Date().toISOString()
            });
          }
        }
      });
      
      // Rastreamento de saída da página
      window.addEventListener('beforeunload', function() {
        fbq('trackCustom', 'PageExit', {
          page_url: window.location.href,
          time_on_page: Date.now() - performance.timing.navigationStart,
          timestamp: new Date().toISOString()
        });
      });
    </script>
    <noscript>
      <img height="1" width="1" style="display:none" 
           src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1" />
    </noscript>
    <!-- End Facebook Pixel Code -->
  </body>
</html>